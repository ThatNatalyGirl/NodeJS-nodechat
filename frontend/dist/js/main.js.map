{"version":3,"sources":["main.js"],"names":["console","log","showMessagesOnDOM","messages","messagesUL","document","querySelector","innerHTML","forEach","message","newLi","createElement","userName","innerText","username","style","fontSize","color","newMessage","text","messageTime","moment","timestamp","format","appendChild","sendMessage","field","value","axios","post","then","response","data","catch","error","window","onload","get","setInterval","addEventListener"],"mappings":";;AAAAA,QAAQC,GAAR;;AAEA;;;AAGA,IAAIC,oBAAoB,SAApBA,iBAAoB,CAASC,QAAT,EAAkB;AACzC,KAAIC,aAAaC,SAASC,aAAT,CAAuB,aAAvB,CAAjB;;AAEAF,YAAWG,SAAX,GAAuB,EAAvB;AACA;AACA;AACA;;AAEAP,SAAQC,GAAR,CAAY,UAAZ,EAAwBE,QAAxB;AACAA,UAASK,OAAT,CAAiB,UAASC,OAAT,EAAiB;AACjC,MAAIC,QAAQL,SAASM,aAAT,CAAuB,IAAvB,CAAZ;;AAEA,MAAIC,WAAWP,SAASM,aAAT,CAAuB,GAAvB,CAAf;AACAC,WAASC,SAAT,GAAsB,WAAWJ,QAAQK,QAAzC;AACAF,WAASG,KAAT,CAAeC,QAAf,GAA0B,MAA1B;AACAJ,WAASG,KAAT,CAAeE,KAAf,GAAuB,MAAvB;;AAEA,MAAIC,aAAab,SAASM,aAAT,CAAuB,GAAvB,CAAjB;AACAO,aAAWL,SAAX,GAAuBJ,QAAQU,IAA/B;;AAEA,MAAIC,cAAcf,SAASM,aAAT,CAAuB,GAAvB,CAAlB;AACAS,cAAYP,SAAZ,GAAwBQ,OAAOZ,QAAQa,SAAf,EAA0BC,MAA1B,CAAiC,mBAAjC,CAAxB;AACA;AACAH,cAAYL,KAAZ,CAAkBE,KAAlB,GAA0B,SAA1B;AACAG,cAAYL,KAAZ,CAAkBC,QAAlB,GAA6B,MAA7B;;AAEAZ,aAAWoB,WAAX,CAAuBd,KAAvB;AACAA,QAAMc,WAAN,CAAkBZ,QAAlB;AACAF,QAAMc,WAAN,CAAkBN,UAAlB;AACAR,QAAMc,WAAN,CAAkBJ,WAAlB;AACA,EArBD;AAsBA,CA/BD;;AAiCA,IAAIK,cAAc,SAAdA,WAAc,GAAU;AAC3B,KAAIC,QAAQrB,SAASC,aAAT,CAAuB,2BAAvB,CAAZ;AACA,KAAIQ,WAAWT,SAASC,aAAT,CAAuB,wBAAvB,CAAf;AACA,KAAIoB,MAAMC,KAAV,EAAgB;AACf;AACAC,QAAMC,IAAN,CAAW,+BAAX,EAA4C;AAC3CV,SAAMO,MAAMC,KAD+B;AAE3Cb,aAAUA,SAASa;AAFwB,GAA5C,EAICG,IAJD,CAIM,UAAUC,QAAV,EAAoB;AACzB/B,WAAQC,GAAR,CAAY,KAAZ;AACAyB,SAAMC,KAAN,GAAc,EAAd;AACA;AACA;AACAzB,qBAAkB6B,SAASC,IAA3B;AAEA,GAXD,EAYCC,KAZD,CAYO,UAAUC,KAAV,EAAiB;AACvBlC,WAAQC,GAAR,CAAYiC,KAAZ;AACA,GAdD;AAeA;AACD,CArBD;;AAuBA;AACAC,OAAOC,MAAP,GAAgB,YAAU;AACzBR,OAAMS,GAAN,CAAU,+BAAV,EACCP,IADD,CACM,UAAUC,QAAV,EAAoB;AACzBO,cAAYpC,kBAAkB6B,SAASC,IAA3B,CAAZ,EAA8C,IAA9C;AACA;AACC,EAJF,EAKEC,KALF,CAKQ,UAAUC,KAAV,EAAiB;AACzBlC,UAAQC,GAAR,CAAYiC,KAAZ;AACE,EAPF;AAQA,CATD;;AAWA7B,SAASC,aAAT,CAAuB,UAAvB,EAAmCiC,gBAAnC,CAAoD,OAApD,EAA6Dd,WAA7D","file":"main.js","sourcesContent":["console.log(`Let's Message!`);\n\n//user types, presses send, get message from field send message to server, get the messages list from the server  and the messages appears on the page\n\n\nlet showMessagesOnDOM = function(messages){\n\tlet messagesUL = document.querySelector('ul.messages')\n\n\tmessagesUL.innerHTML = '';\n\t// while(messagesUL.children.length){\n\t// \tmessagesUL.removeChild(messagesUL.children[0])\n\t// }]\\\n\n\tconsole.log(\"messages\", messages)\n\tmessages.forEach(function(message){\n\t\tlet newLi = document.createElement('li')\n\t\t\n\t\tlet userName = document.createElement('p')\n\t\tuserName.innerText =  \"User: \" + message.username\n\t\tuserName.style.fontSize = '14px'\n\t\tuserName.style.color = 'blue'\n\n\t\tlet newMessage = document.createElement('p')\n\t\tnewMessage.innerText = message.text\n\n\t\tlet messageTime = document.createElement('p')\n\t\tmessageTime.innerText = moment(message.timestamp).format(\"MMM Do hh:mm:ss a\")\n\t\t// moment().format('MMMM Do YYYY, h:mm:ss a');\n\t\tmessageTime.style.color = '#a5c4f2'\n\t\tmessageTime.style.fontSize = '14px'\n\n\t\tmessagesUL.appendChild(newLi)\n\t\tnewLi.appendChild(userName)\n\t\tnewLi.appendChild(newMessage)\n\t\tnewLi.appendChild(messageTime)\n\t})\n}\n\nlet sendMessage = function(){\n\tlet field = document.querySelector('input[name=\"new-message\"]');\n\tlet username = document.querySelector('input[name=\"username\"]');\n\tif (field.value){\n\t\t// console.log(\"send to server\", field.value)\n\t\taxios.post('http://localhost:1337/message', {\n\t\t\ttext: field.value,\n\t\t\tusername: username.value,\n\t\t})\n\t\t.then(function (response) {\n\t\t\tconsole.log(\"yay\");\n\t\t\tfield.value = '';\n\t\t\t//clears out field and only works on successful submission\n\t\t\t// console.log(\"server responded\", response.data)\n\t\t\tshowMessagesOnDOM(response.data);\n\t\t\t\n\t\t})\n\t\t.catch(function (error) {\n\t\t\tconsole.log(error);\n\t\t});\n\t}\n}\n\n//updates all messages when the page loads\nwindow.onload = function(){\n\taxios.get('http://localhost:1337/message')\n\t.then(function (response) {\n\t\tsetInterval(showMessagesOnDOM(response.data), 3000)\n\t\t// ^ that is updating the messages every 3 secs\n  })\n  .catch(function (error) {\n\tconsole.log(error);\n  });\n}\n\ndocument.querySelector(\".sendBtn\").addEventListener('click', sendMessage);\n"]}